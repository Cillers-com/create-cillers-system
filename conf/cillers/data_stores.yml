# Configuration for the data containers, which are services that store data in some form. 
#
# Structure: 
#
# - <id>:
#     type: couchbase
#     data_structures:
#       - type: <data structure type id>
#         <type specific param>: <value>
#     system_bucket: <name of bucket with system meta data>
#     system_scope: <name of scope in the system_bucket with system meta data>
#     clusters:
#       <cluster id>:
#         type: <cluster type>
#         change_maker_client: <client id>
#         system_bucket_specs:
#           type: <bucket type>
#           ram_quota_mb: <int>
#           replicas: <int>
#           durability: <durability type>
#
# - <id>: 
#     type: redpanda
#     data_structures:
#       - type: <data structure type id>
#         <type specific param>: <value>
#     system_topics_prefix: <string that should prefix all topics with system meta data>
#     clusters:
#       <cluster id>:
#         type: <redpanda cluster type>
#         change_maker_client: <client id>
#         system_topics_specs:
#           partitions: <int>
#           replication_factor: <int>
#
# - <id>:
#     type: couchbase
#     data_structures:
#       - type: <data structure type id>
#         <type specific param>: <value>
#     system_bucket: <name of bucket with system meta data>
#     system_scope: <name of scope in the system_bucket with system meta data>
#     clusters:
#       <cluster id>: <standard configuration id>
# 
# - <id>: 
#     type: redpanda
#     data_structures: <standard configuration id>
#     system_topics_prefix: <string that should prefix all topics with system meta data>
#     clusters:
#       <cluster id>: <standard configuration id>
#
# - <standard configuration id>
# 
# Example:
#
# couchbase: standard_local_and_capella
# redpanda: standard_local_and_cloud

couchbase:
  data_structures: 
    main:
      type: couchbase_cluster
      bucket_prefixes_to_exclude: tenant
      scope_prefixes_to_exclude:
        - tenant
    tenant_buckets:
      type: couchbase_bucket_clones
      prefix: tenant
    tenant_scopes:
      type: couchbase_scope_clones
      prefix: tenant
      buckets:
        - main # _all
  system_bucket: main 
  system_scope: system
  capella_projects: 
    main:
      organization_id: ffffffff-aaaa-1414-eeee-000000000000
      project_id: 4ead0ff6-869a-41bc-a84a-3be557b1c355
  clusters:
    production_eu:
      type: capella
      change_maker_client: couchbase.production_eu.change_maker
      system_bucket_specs:
        type: couchbase
        ram_quota_mb: 1024
        replicas: 2
        durability: majority
      project: main
      cloud_provider:
        type: aws
        region: "eu-central-1"
      cluster_specs:
        type: multiNode
        size: Medium
        service_tier: Developer Pro
        auto_failover: true
        auto_failover_timeout: 30
      service_groups:
        main: 
          services: ["data", "index", "query", "search"]
          nodes: 3
          cpu: 16
          ram: 32
          disk:
            storage: 50
            type: gp3
            iops: 3000
        analytics:
          services: ["analytics"]
          nodes: 2
          type: Standard

    production_asia:
      type: capella
      change_maker_client: couchbase.production_asia.change_maker
      system_bucket_specs:
        type: couchbase
        ram_quota_mb: 1024
        replicas: 2
        durability: majority
      project: main
      cloud_provider:
        type: aws
        region: "eu-central-1"
      cluster_specs:
        type: multiNode
        size: Medium
        service_tier: Developer Pro
        auto_failover: true
        auto_failover_timeout: 30
      service_groups:
        main: 
          services: ["data", "index", "query", "search"]
          nodes: 3
          cpu: 16
          ram: 32
          disk:
            storage: 50
            type: gp3
            iops: 3000
        analytics:
          services: ["analytics"]
          nodes: 2
          type: Standard

    stage:
      type: capella
      change_maker_client: couchbase.stage.change_maker
      system_bucket_specs:
        type: couchbase
        ram_quota_mb: 512
        replicas: 1
        durability: none
      project: main
      cloud_provider:
        type: aws
        region: "eu-central-1"
      cluster_specs:
        type: multiNode
        size: Medium
        service_tier: Developer Pro
        auto_failover: true
        auto_failover_timeout: 30
      service_groups:
        main: 
          services: ["data", "index", "query", "search", "analytics"]
          nodes: 3
          cpu: 16
          ram: 32
          disk:
            storage: 50
            type: gp3
            iops: 3000

    development:
      type: local
      change_maker_client: couchbase._default
      system_bucket_specs:
        type: couchbase
        ram_quota_mb: 256
        replicas: 1
        durability: none

    test:
      type: local
      change_maker_client: couchbase._default
      system_bucket_specs:
        type: memcached 
        ram_quota_mb: 256
        replicas: 1
        durability: none

redpanda:
  data_structures:
    main:
      type: redpanda_cluster
      namespaces_to_exclude:
        - tenants
    tenant:
      type: redpanda_namespace_clones
      namespace: tenants
      system_topics_prefix: system 
  clusters:
    production:
      type: cloud
      change_maker_client: redpanda.production.change_maker
      system_topics_specs:
        partitions: 6
        replication_factor: 3

    stage:
      type: cloud
      change_maker_client: redpanda.stage.change_maker
      system_topics_specs:
        partitions: 3
        replication_factor: 2

    development:
      type: local
      change_maker_client: redpanda._default
      system_topics_specs:
        partitions: 1
        replication_factor: 1

    test:
      type: local
      change_maker_client: redpanda._default
      system_topics_specs:
        partitions: 1
        replication_factor: 1

